<!DOCTYPE html>
{% load static %}
<html lang="en" class="loading">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
    <meta name="description"
          content="Convex admin is super flexible, powerful, clean &amp; modern responsive bootstrap 4 admin template with unlimited possibilities.">
    <meta name="keywords"
          content="admin template, Convex admin template, dashboard template, flat admin template, responsive admin template, web app">
    <meta name="author" content="PIXINVENT">
    <title>Page for administrator</title>
    <link rel="apple-touch-icon" sizes="60x60" href="{% static 'app-assets/img/ico/apple-icon-60.png' %}">
    <link rel="apple-touch-icon" sizes="76x76" href="{% static 'app-assets/img/ico/apple-icon-76.png' %}">
    <link rel="apple-touch-icon" sizes="120x120" href="{% static 'app-assets/img/ico/apple-icon-120.png' %}">
    <link rel="apple-touch-icon" sizes="152x152" href="{% static 'app-assets/img/ico/apple-icon-152.png' %}">
    <link rel="shortcut icon" type="image/x-icon" href="{% static 'app-assets/img/ico/favicon.ico' %}">
    <link rel="shortcut icon" type="image/png" href="{% static 'app-assets/img/ico/favicon-32.png' %}">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-touch-fullscreen" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <link href="https://fonts.googleapis.com/css?family=Rubik:300,400,500,700,900%7CMontserrat:300,400,500,600,700,800,900"
          rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="{% static 'app-assets/fonts/feather/style.min.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'app-assets/fonts/simple-line-icons/style.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'app-assets/fonts/font-awesome/css/font-awesome.min.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'app-assets/vendors/css/perfect-scrollbar.min.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'app-assets/vendors/css/prism.min.css' %}">
    <link rel="stylesheet" type="text/css"
          href="{% static 'app-assets/vendors/css/tables/datatable/datatables.min.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'app-assets/css/app.css' %}">
    <link rel="stylesheet" href="{% static 'ztreecss/zTreeStyle/zTreeStyle.css' %}">
    <link rel="stylesheet" href="{% static 'app-assets/css/questionaire.css' %}">
    <link href="https://unpkg.com/filepond/dist/filepond.css" rel="stylesheet">
    <link href="https://unpkg.com/filepond-plugin-image-preview/dist/filepond-plugin-image-preview.css"
          rel="stylesheet">

</head>
<body data-col="2-columns" class=" 2-columns">
<div class="modal fade" data-model-name="accumulation">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">设置计分模型</h4>
                <button type="button" class="close" data-dismiss="modal"
                        aria-label="Close">
                    <span aria-hidden="true">&times;</span></button>
            </div>
            <div class="modal-body">
                <div class="tab-content">
                    <div class="tab-pane active">
                        <table class="table table-responsive-md text-center">
                            <thead>
                            <tr>
                                <th>选项</th>
                                <th>得分</th>
                                <th>操作</th>
                            </tr>
                            </thead>
                            <tbody>
                            </tbody>
                            <tfoot>
                            </tfoot>
                        </table>
                        <button class="btn btn-primary mb-2" onclick="addrow(event)">添加</button>
                        <div class="modal-footer">
                            <button class="btn btn-primary"
                                    onclick="schemeedit(event)">提交
                            </button>
                            <button class="btn btn-default pull-left"
                                    data-dismiss="modal">关闭
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- ////////////////////////////////////////////////////////////////////////////-->
<div class="wrapper nav-collapsed menu-collapsed">


    <div data-active-color="white" data-background-color="primary" data-image="" class="app-sidebar">
        <div class="sidebar-header">
            <div class="logo clearfix"><a href="{% url 'administrator' %}" class="logo-text float-left">
                <div class="logo-img"><img src="{% static 'app-assets/img/logo.png' %}" alt="Convex Logo"/></div>
                <span class="text align-middle">CNIC</span></a><a id="sidebarToggle" href="javascript:;"
                                                                  class="nav-toggle d-none d-sm-none d-md-none d-lg-block"><i
                    data-toggle="collapsed" class="ft-circle toggle-icon"></i></a><a id="sidebarClose"
                                                                                     href="javascript:;"
                                                                                     class="nav-close d-block d-md-block d-lg-none d-xl-none"><i
                    class="ft-circle"></i></a></div>
        </div>
        <div class="sidebar-content">
            <div class="nav-container">
                <ul id="main-menu-navigation" data-menu="menu-navigation" class="navigation navigation-main">
                    <li class="has-sub nav-item"><a href="#"><i class="ft-menu"></i><span
                            data-i18n=""
                            class="menu-title">项目管理</span></a>
                        <ul class="menu-content">
                            {% for u in evalname %}
                                <li>
                                    <a href="{% url 'standard' %}?evalname={{ u.table_evaluation_col_name }}&admin={{ admin }}"
                                       class="menu-item">{{ u.table_evaluation_col_name }}</a>
                                </li>
                            {% endfor %}
                        </ul>
                    </li>

                    <li class="has-sub nav-item"><a href="#"><i class="icon-calendar"></i><span
                            data-i18n=""
                            class="menu-title">项目进度</span></a>
                        <ul class="menu-content">
                            {% for t in evalname %}
                                <li>
                                    <a href="{% url 'timeliner' %}?timeevalname={{ t.table_evaluation_col_name }}&admin={{ admin }}"
                                       class="menu-item">{{ t.table_evaluation_col_name }}</a>
                                </li>
                            {% endfor %}
                        </ul>
                    </li>

                    <li class="has-sub nav-item"><a href="#"><i class="ft-file-text"></i><span
                            data-i18n=""
                            class="menu-title">数据采集</span></a>
                        <ul class="menu-content">
                            <li><a href="{% url 'questionaire_manage' %}" class="menu-item">问卷管理</a></li>
                        </ul>

                    </li>
                    <li class="has-sub nav-item"><a href="#"><i class="ft-folder"></i><span
                            data-i18n=""
                            class="menu-title">数据统计</span></a></li>
                </ul>
            </div>
        </div>
        <div class="sidebar-background"></div>
    </div>


    <nav class="navbar navbar-expand-lg navbar-light bg-faded">
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" data-toggle="collapse" class="navbar-toggle d-lg-none float-left"><span
                        class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span
                        class="icon-bar"></span><span class="icon-bar"></span></button>
                <span class="d-lg-none navbar-right navbar-collapse-toggle"><a class="open-navbar-container"><i
                        class="ft-more-vertical"></i></a></span><a id="navbar-fullscreen" href="javascript:;"
                                                                   class="mr-2 display-inline-block apptogglefullscreen"><i
                    class="ft-maximize blue-grey darken-4 toggleClass"></i>
                <p class="d-none">fullscreen</p></a>


            </div>
            <div class="navbar-container">
                <div id="navbarSupportedContent" class="collapse navbar-collapse">
                    <ul class="navbar-nav">
                        <li class="dropdown nav-item mr-0"><a id="dropdownBasic3" href="#" data-toggle="dropdown"
                                                              class="nav-link position-relative dropdown-user-link dropdown-toggle"><span
                                class="avatar avatar-online"><img id="navbar-avatar"
                                                                  src="{% static 'app-assets/img/portrait/small/avatar-s-3.jpg' %}"
                                                                  alt="avatar"/></span>
                            <p class="d-none">User Settings</p></a>
                            <div aria-labelledby="dropdownBasic3" class="dropdown-menu dropdown-menu-right">
                                <div class="arrow_box_right">
                                    <a href="{% url 'logout' %}" class="dropdown-item"><i
                                            class="ft-power mr-2"></i><span>Logout</span></a>
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>
    <div class='modal fade' id='filling' role='dialog' tabindex="-1" aria-hidden='true'>
        <div class='modal-dialog' role='document'>
            <div class='modal-content'>
                <div class='modal-header'>
                    <h4 class='modal-title' id='filling-title'></h4>
                    <button type='button' class='close' data-dismiss='modal' aria-label='Close'>
                        <span aria-hidden='true'>&times;</span>
                    </button>
                </div>
                <div class='modal-body' id='filling-body'>
                </div>
                <div class='modal-footer'>
                    <button type='button' class='btn grey btn-outline-secondary' data-dismiss='modal'>关闭</button>
                    <button type='button' class='btn btn-outline-primary'>保存</button>
                </div>
            </div>
        </div>
    </div>


    <div class="main-panel">
        <div class="main-content">
            <div class="content-wrapper">
                <div class="container-fluid"><!-- Base style table -->
                    <section id="base-style">
                        <div class="row">
                            <div class="col-12 col-lg-3">
                                <div class="card" style="position: -webkit-sticky; position: sticky; top: 0">
                                    <div class="card-header">
                                        <div class="card-title-wrap bar-success">
                                            <h4 class="card-title">题型选择</h4>
                                        </div>
                                    </div>
                                    <div class="card-body">
                                    </div>
                                    <div class="card-block">
                                        <div class="row">
                                            <div class="col-md-6 col-sm-6 col-12">
                                                <ul class="nav-list">
                                                    <li>
                                                        <a id="choice"
                                                           onclick="choice()"><span>选择题</span></a>
                                                    </li>
                                                    <li>
                                                        <a id="blank"
                                                           onclick="blankfilling()"><span>填空题</span></a>
                                                    </li>
                                                    <li>
                                                        <a id="answer" onclick="answerfilling()"><span>简答题</span></a>
                                                    </li>
                                                    <li>
                                                        <a id="matrix" onclick="matrixfilling()"><span>矩阵题</span></a>
                                                    </li>
                                                    <li>
                                                        <a id="form" onclick="formfilling()"><span>表格题</span></a>
                                                    </li>
                                                    <li>
                                                        <a id="attachment"
                                                           onclick="attachmentfilling()"><span>附件题</span></a>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-9 col-sm-12">
                                <div class="card">
                                    <div class="card-header">
                                        <div class="card-title-wrap bar-success">
                                            <h4 class="card-title">问卷设置</h4>
                                        </div>
                                    </div>

                                    <div class="card-body">
                                        <div class="card-block">
                                            <div id="question_list">
                                                <input type="file" class="filepond" multiple data-max-files="3">
                                            </div>
                                            <input type="button" class="btn btn-warning btn-lg btn-block" value="完成编辑" onclick="questionaire_submit()">
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>

                    </section>
                </div>
            </div>
        </div>
        <footer class="footer footer-static footer-light">
            <p class="clearfix text-muted text-center px-2"><span>Copyright  &copy; CNIC <a href="#" id="pixinventLink"
                                                                                            target="_blank"
                                                                                            class="text-bold-800 primary darken-2"></a>, All rights reserved. </span>
            </p>
        </footer>

    </div>
</div>
<!-- BEGIN VENDOR JS-->
<script src="{% static 'app-assets/vendors/js/core/jquery-3.3.1.min.js' %}"></script>
<script src="{% static 'ztreejs/jquery.ztree.all.min.js' %}"></script>
<script src="{% static 'app-assets/vendors/js/core/popper.min.js' %}"></script>
<script src="{% static 'app-assets/vendors/js/core/bootstrap.min.js' %}"></script>
<script src="{% static 'app-assets/vendors/js/perfect-scrollbar.jquery.min.js' %}"></script>
<script src="{% static 'app-assets/vendors/js/prism.min.js' %}"></script>
<script src="{% static 'app-assets/vendors/js/jquery.matchHeight-min.js' %}"></script>
<script src="{% static 'app-assets/vendors/js/screenfull.min.js' %}"></script>
<script src="{% static 'app-assets/vendors/js/pace/pace.min.js' %}"></script>
<!-- BEGIN VENDOR JS-->
<!-- BEGIN PAGE VENDOR JS-->
<script src="{% static 'app-assets/vendors/js/datatable/datatables.min.js' %}"></script>
<!-- END PAGE VENDOR JS-->
<!-- BEGIN CONVEX JS-->
<script src="{% static 'app-assets/js/app-sidebar.js' %}"></script>
<script src="{% static 'app-assets/js/notification-sidebar.js' %}"></script>
<!-- END CONVEX JS-->
<!-- BEGIN PAGE LEVEL JS-->
<script src="{% static 'app-assets/js/data-tables/datatable-styling.js' %}"></script>
<script src="{% static 'ztreejs/jquery.ztree.core.js' %}"></script>
<script type="text/javascript" src="{% static 'ztreejs/jquery.ztree.exhide.min.js' %}"></script>
<script type="text/javascript" src="{% static 'ztreejs/fuzzysearch.js' %}"></script>
<!-- END PAGE LEVEL JS-->
<script src="{% static 'ztreejs/csrf.js' %}"></script>
<script src="{% static 'ztreejs/jquery.custom.js' %}"></script>
<script src="{% static 'src/js/jquery.cookie.js' %}"></script>
<script src="{% static 'src/js/questionaire.js' %}"></script>
<script src="https://unpkg.com/filepond/dist/filepond.js"></script>
<script src="https://unpkg.com/filepond-plugin-image-preview/dist/filepond-plugin-image-preview.js"></script>
<script>
    // querySelector() 方法返回文档中匹配指定 CSS 选择器的一个元素。
    var inputElement = document.querySelector('input[type="file"]');

    FilePond.registerPlugin(
        FilePondPluginImagePreview
    );

    FilePond.setOptions({

        server: '/upload',
        // 设置图片类型只能为png才能上传
        allowFileTypeValidation: false,
        acceptedFileTypes: "image/jpg",
        // 启用或禁用图像裁剪
        allowImageCrop: true,

        // 启用或禁用文件大小验证
        allowFileSizeValidation: true,
        maxFileSize: null,

        // 启用或禁用提取EXIF信息
        allowImageExifOrientation: true

    });

    // 使用create方法逐步增强基本文件输入到FilePond元素。
    FilePond.create(inputElement)
</script>
<script>
    var q = {{ data|safe }};
    console.log(q);
    for (var i = 0; i < q.length; i++) {
        var attachment = q[i]['attachment'];
        var questionclass = q[i]['class'];
        var content = q[i]['content'];
        var importanswer = q[i]['import'];
        var indicator_id = q[i]['indicator_id'];
        var markmethod = q[i]['markmethod'];
        var marks = q[i]['marks'];
        var question_number = q[i]['question_number'];
        var question_type = q[i]['question_type'];
        var required = q[i]['required'];
        {#var scheme = q[i]['scheme'];#}
        if (q[i]['question_type'] === '选择题') {
            var len = $(".div_question").length + 1;
            $('#question_list').append("                                                <div class=\"div_question\" id = " + len + ">\n" +
                "                                                    <form method=\"post\" class=\"form-horizontal\">\n" +
                "                                                        <div onclick=\"toggle_edit(event)\" class='toggle'>\n" +
                "                                                            <div>\n" +
                "<h5 style=\'display: inline\'>" + len + '.' + ' ' + "</h5>" +
                "                                                                <h5 style=\"display: inline\">" + JSON.parse(q[i]['content'])['title'] + ' </h5>\n' + "<button class=\"btn mr-1 btn-secondary\" onclick=\'delquestion(event)\' >del</button>" +
                "                                                            </div>\n" +
                "                                                            <div>\n" +
                "                                                                <ul class=\"choice_list\">\n" +
                "                                                                </ul>\n" +
                "                                                            </div>\n" +
                "                                                        </div>\n" +
                "                                                        <div>\n" +
                "                                                            <input style=\"display: none\" name=\"questiontype\"\n" +
                "                                                                   value=" + question_type + ">\n" +
                "<input style=\"display: none\" name=\"questionnumber\"\n" +
                "                                                                   value= " + question_number + ">\n" +
                "<input style=\'display: none\' name='\indicatorID\'\n value=" + indicator_id + ">" +
                "                                                            <textarea class=\"form-control\"\n" +
                "                                                                      onkeyup=\"SwapTxt(event)\"\n" +
                "                                                                      name=\"choicetitle\">" + JSON.parse(q[i]['content'])['title'] + "</textarea>\n" +
                "                                                            <div class=\"row\" style=\"margin-top: 15px\">\n" +
                "                                                                <div class=\"col-md-9\">\n" +
                "                                                        <span><select class=\"form-control-sm\" name=\"class\">\n" +
                "                                                            <option>单选</option>\n" +
                "                                                            <option>多选</option>\n" +
                "                                                        </select>\n" +
                "                                                            </span>\n" +
                "                                                                    <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input\n" +
                "                                                                            type=\"checkbox\"\n" +
                "                                                                            name=\"required\"><span>必答题</span></span>\n" +
                "                                                                    <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input\n" +
                "                                                                            type=\"checkbox\" name=\"attachment\"><span>含附件上传</span></span>\n" +
                "                                                                    <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<select\n" +
                "                                                                            class=\"form-control-sm\" name=\"markmethod\">\n" +
                "                                                            <option>自动打分</option>\n" +
                "                                                            <option>手动打分</option>\n" +
                "                                                        </select></span>\n" +
                "                                                                    <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input\n" +
                "                                                                            type=\"checkbox\" name=\"importanswer\"><span>导入答案</span></span>\n" +
                "                                                                    <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span>满分: </span><input type=\"text\" name=\"points\" size=\'10\'></span>\n" +
                "                                                                </div>\n" +
                "                                                            </div>\n" +
                "                                                            <div style=\"margin-top: 15px\">\n" +
                "                                                                <table class=\"table table-responsive-sm text-left\"\n" +
                "                                                                       style=\"table-layout: fixed\">\n" +
                "                                                                    <tbody>\n" +
                "                                                                    <tr>\n" +
                "                                                                        <td>选项文字</td>\n" +
                "                                                                        <td>允许填空</td>\n" +
                "                                                                        <td>上移下移</td>\n" +
                "                                                                    </tr>\n" +
                "                                                                    </tbody>\n" +
                "                                                                </table>\n" +
                "                                                                <div style=\"margin-left: 10px;margin-bottom: 15px\">\n" +
                "                                                                    <a class=\"addchoice\"\n" +
                "                                                                       onclick=\"addchoice(event)\"><span>添加选项</span></a>\n" +
                "                                                                </div>\n" +
                "                                                            </div>\n" +
                "                                                            <input type=\"button\"\n" +
                "                                                                   class=\"btn btn-outline-danger btn-lg  btn-round\"\n" +
                "                                                                   value=\"保存\" onclick=\"submit_choice(event); hide_edit(event)\">\n" +
                "                                                            <input type='button'" +
                "                                                                   class=\"btn btn-outline-danger btn-lg btn-round\"\n" +
                "                                                                   value=\"清空\" onclick='clearForm_choice(event)'>\n" +
                "                                                        </div>\n" +
                "                                                    </form>\n" +
                "                                                </div>"
            );
            variableID(10);
            for (var x = 0; x < JSON.parse(q[i]['content'])['answer'].length; x++) {
                $('.div_question').last().find('.choice_list').append("                                                                    <li class=\"mb-2\">\n" +
                    "                                                                        <input type=\"checkbox\">\n" +
                    "                                                                        <span>" + JSON.parse(q[i]['content'])['answer'][x] + "</span></li>\n")
            }
            if (questionclass === '单选') {
                $('.div_question').last().find('select')[0][0].selected = true
            } else {
                $('.div_question').last().find('select')[0][1].selected = true
            }
            if (required === 'on') {
                $('.div_question').last().find("input[name='required']")[0].checked = true
            } else {
                $('.div_question').last().find("input[name='required']")[0].checked = false
            }
            if (attachment === 'on') {
                $('.div_question').last().find("input[name='attachment']")[0].checked = true
            } else {
                $('.div_question').last().find("input[name='attachment']")[0].checked = false
            }
            if (markmethod === '自动打分') {
                $('.div_question').last().find('select')[1][0].selected = true
            } else {
                $('.div_question').last().find('select')[1][1].selected = true
            }
            if (importanswer === 'on') {
                $('.div_question').last().find("input[name='importanswer']")[0].checked = true
            } else {
                $('.div_question').last().find("input[name='importanswer']")[0].checked = false
            }
            $('.div_question').last().find("input[name='points']").val(marks);
            for (var y = 0; y < JSON.parse(q[i]['content'])['answer'].length; y++) {
                $('.div_question').last().find('table').children().append(
                    "                                                                    <tr class=\"choiceedit\">\n" +
                    "                                                                        <td>\n" +
                    "                                                                            <input type=\"text\"\n" +
                    "                                                                                   onkeyup=\"SwapTxt_option(event)\"\n" +
                    "                                                                                   onclick=\"trid(event)\" name=\"choice\" value=" + JSON.parse(q[i]['content'])['answer'][y] + ">\n" +
                    "                                                                            <a onclick=\"delchoice(event)\"><i\n" +
                    "                                                                                    class=\"ft-minus-circle\"></i></a>\n" +
                    "                                                                        </td>\n" +
                    "                                                                        <td>\n" +
                    "                                                                            <input type=\"checkbox\"\n" +
                    "                                                                                   onchange=\"allowblank(event)\"\n" +
                    "                                                                                   name=\"blank\">\n" +
                    "                                                                        </td>\n" +
                    "                                                                        <td>\n" +
                    "                                                                            <a onclick=\"moveup(event)\"><i class=\"ft-arrow-up\"></i></a>\n" +
                    "                                                                            <a onclick=\"movedown(event)\"><i class=\"ft-arrow-down\"></i></a>\n" +
                    "                                                                        </td>\n" +
                    "                                                                    </tr>\n"
                )
            }
        } else if (q[i]['question_type'] === '填空题') {
            var len = $(".div_question").length + 1;
            $('#question_list').append("                                               <div class=\"div_question\" id = " + len + ">\n" +
                "                                                        <form method=\"post\" class=\"form-horizontal\">\n" +
                "                                                            <div onclick=\"toggle_edit(event)\" class='toggle'>\n" +
                "                                                        <div>\n" +
                "                                                            <h5 style=\"display: inline\">" + len + '.' + ' ' + "</h5>\n" +
                "                                                            <h5 style=\"display: inline\">" + JSON.parse(q[i]['content'])['title'] + " </h5>\n" +
                "                                                            <button class=\"btn mr-1 btn-secondary\" onclick='delquestion(event)'>del</button>\n" +
                "                                                        </div>\n" +
                "                                                            </div>\n" +
                "\n" +
                "                                                    <div>\n" +
                "                                                        <input style=\"display: none\" name=\"questiontype\" value=" + question_type + ">\n" +
                "                                                        <input style=\"display: none\" name=\"questionnumber\" value= " + question_number + ">\n" +
                "                                                        <input style=\"display: none\" name=\"indicatorID\" value=" + indicator_id + ">\n" +
                "                                                        <textarea class=\"form-control\"\n" +
                "                                                                  onkeyup=\"SwapTxt(event)\" name=\"choicetitle\">" + JSON.parse(q[i]['content'])['title'] + "</textarea>\n" +
                "                                                        <div class=\"row\" style=\"margin-top: 15px\">\n" +
                "                                                            <div class=\"col-md-9\">\n" +
                "                                                                <span><input\n" +
                "                                                                        name=\"required\"\n" +
                "                                                                        type=\"checkbox\"><span>必答题</span></span>\n" +
                "                                                                <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input\n" +
                "                                                                        name=\"attachment\"\n" +
                "                                                                        type=\"checkbox\"><span>含附件上传</span></span>\n" +
                "                                                                <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<select\n" +
                "                                                                        name=\"markmethod\" class=\"form-control-sm\">\n" +
                "                                                            <option>自动打分</option>\n" +
                "                                                            <option>手动打分</option>\n" +
                "                                                        </select></span>\n" +
                "                                                                <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input\n" +
                "                                                                        name=\"importanswer\"\n" +
                "                                                                        type=\"checkbox\"><span>导入答案</span></span>\n" +
                "                                                                <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span>满分： </span><input type=\"text\" name=\"points\"></span>\n" +
                "                                                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n" +
                "                                                            </div>\n" +
                "                                                        </div>\n" +
                "                                                        <div>\n" +
                "                                                        <div style=\"margin-left: 10px;margin-bottom: 15px\">\n" +
                "                                                        </div>\n" +
                "                                                        <input type=\"button\"\n" +
                "                                                               class=\"btn btn-outline-danger btn-lg  btn-round\"\n" +
                "                                                               value=\"保存\" onclick=\"submit_blank(event); hide_edit_blank(event)\">\n" +
                "                                                        <input type=\"button\" class=\"btn btn-outline-danger btn-lg  btn-round\" value=\"清空\" onclick='clearForm_blank(event)'>\n" +
                "                                                            </div>\n" +
                "                                                    </div>\n" +
                "                                                            </form>\n" +
                "                                                </div>");
            variableID(10);
            if (required === 'on') {
                $('.div_question').last().find("input[name='required']")[0].checked = true
            } else {
                $('.div_question').last().find("input[name='required']")[0].checked = false
            }
            if (attachment === 'on') {
                $('.div_question').last().find("input[name='attachment']")[0].checked = true
            } else {
                $('.div_question').last().find("input[name='attachment']")[0].checked = false
            }
            if (markmethod === '自动打分') {
                $('.div_question').last().find('select')[0][0].selected = true
            } else {
                $('.div_question').last().find('select')[0][1].selected = true
            }
            if (importanswer === 'on') {
                $('.div_question').last().find("input[name='importanswer']")[0].checked = true
            } else {
                $('.div_question').last().find("input[name='importanswer']")[0].checked = false
            }
            $('.div_question').last().find("input[name='points']").val(marks);
        } else if (q[i]['question_type'] === '简答题') {
            var len = $(".div_question").length + 1;
            $('#question_list').append("                                      <div class=\"div_question\" id = " + len + ">\n" +
                "                                                    <form method=\"post\" class=\"form-horizontal\">\n" +
                "                                                    <div onclick = \"toggle_edit(event)\" class='toggle'>\n" +
                "                                                        <div>\n" +
                "                                                            <h5 style=\"display: inline\">" + len + '.' + ' ' + "</h5>\n" +
                "                                                            <h5 style=\"display: inline\">" + JSON.parse(q[i]['content'])['title'] + " </h5>\n" +
                "                                                            <button class=\"btn mr-1 btn-secondary\" onclick='delquestion(event)'>del</button>\n" +
                "<textarea class=\'form-control\' name=\'answerarea\' disabled>答题区域</textarea>" +
                "                                                        </div>\n" +
                "                                                    </div>\n" +
                "                                                    <div>\n" +
                "                                                        <input style=\"display: none\" name=\"questiontype\" value=" + question_type + ">\n" +
                "                                                        <input style=\"display: none\" name=\"questionnumber\" value= " + question_number + ">\n" +
                "                                                        <input style=\"display: none\" name=\"indicatorID\" value=" + indicator_id + ">\n" +
                "<div class=\'row\' style='margin-top: 15px\'></div>" +
                "                                                        <textarea class=\"form-control\"\n" +
                "                                                                  onkeyup=\"SwapTxt(event)\" name=\"choicetitle\">" + JSON.parse(q[i]['content'])['title'] + "</textarea>\n" +
                "                                                        <div class=\"row\" style=\"margin-top: 15px\">\n" +
                "                                                            <div class=\"col-md-9\">\n" +
                "                                                        <span>尺寸 高： <input name=\"height\" size=\"10\" onkeyup=\'areaheight(event)\' value = " + questionclass + ">\n" +
                "                                                            </span>\n" +
                "                                                                <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input\n" +
                "                                                                        name=\"required\"\n" +
                "                                                                        type=\"checkbox\"><span>必答题</span></span>\n" +
                "                                                                <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input\n" +
                "                                                                        name=\"attachment\"\n" +
                "                                                                        type=\"checkbox\"><span>含附件上传</span></span>\n" +
                "                                                                <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<select\n" +
                "                                                                        name=\"markmethod\" class=\"form-control-sm\">\n" +
                "                                                            <option>自动打分</option>\n" +
                "                                                            <option>手动打分</option>\n" +
                "                                                        </select></span>\n" +
                "                                                                <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input\n" +
                "                                                                                name=\"importanswer\"\n" +
                "                                                                                type=\"checkbox\"><span>导入答案</span></span>\n" +
                "                                                                        <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span>满分: </span>\n" +
                "                                                                            <input type=\"text\" name=\"points\" size=\"10\">\n" +
                "                                                                        </span>\n" +
                "                                                                       &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n" +
                "                                                            </div>\n" +
                "                                                        </div>\n" +
                "                                                        <div>\n" +
                "                                                        <div style=\"margin-left: 10px;margin-bottom: 15px\">\n" +
                "                                                        </div>\n" +
                "                                                        <input type=\"button\"\n" +
                "                                                               class=\"btn btn-outline-danger btn-lg  btn-round\"\n" +
                "                                                               value=\"保存\" onclick=\"submit_answer(event); hide_edit_blank(event)\">\n" +
                "                                                        <input type=\"button\"\n" +
                "                                                               class=\"btn btn-outline-danger btn-lg  btn-round\"\n" +
                "                                                               value=\"清空\" onclick='clearForm_blank(event)'>\n" +
                "                                                    </div>\n" +
                "                                                        </div>\n" +
                "                                                        </form>\n" +
                "                                                </div>");
            variableID(10);
            if (required === 'on') {
                $('.div_question').last().find("input[name='required']")[0].checked = true
            } else {
                $('.div_question').last().find("input[name='required']")[0].checked = false
            }
            if (attachment === 'on') {
                $('.div_question').last().find("input[name='attachment']")[0].checked = true
            } else {
                $('.div_question').last().find("input[name='attachment']")[0].checked = false
            }
            if (markmethod === '自动打分') {
                $('.div_question').last().find('select')[0][0].selected = true
            } else {
                $('.div_question').last().find('select')[0][1].selected = true
            }
            if (importanswer === 'on') {
                $('.div_question').last().find("input[name='importanswer']")[0].checked = true
            } else {
                $('.div_question').last().find("input[name='importanswer']")[0].checked = false
            }
            $('.div_question').last().find("input[name='points']").val(marks);
        } else if (q[i]['question_type'] === '矩阵题') {
            var len = $(".div_question").length + 1;
            $('#question_list').append("                                <div class=\"div_question\" id = " + len + ">\n" +
                "                                                    <form method=\"post\" class=\"form-horizontal\">\n" +
                "                                                        <div onclick=\"toggle_edit(event)\" class='toggle'>\n" +
                "                                                            <div>\n" +
                "                                                                <h5 style=\"display: inline\">" + len + '.' + ' ' + "</h5>\n" +
                "                                                                <h5 style=\"display: inline\">" + JSON.parse(q[i]['content'])['title'] + " </h5>\n" +
                "                                                                <button class=\"btn mr-1 btn-secondary\"\n" +
                "                                                                        onclick='delquestion(event)'>del</button>\n" +
                "                                                            </div>\n" +
                "                                                            <div>\n" +
                "                                                                <table class=\"table table-responsive-sm text-left\"  style=\"table-layout:fixed;\">\n" +
                "                                                                    <thead>\n" +
                "                                                                    <tr>\n" +
                "                                                                        <td></td>\n" +
                "                                                                    </tr>\n" +
                "                                                                    </thead>\n" +
                "                                                                    <tbody>\n" +
                "                                                                    </tbody>\n" +
                "                                                                </table>\n" +
                "                                                            </div>\n" +
                "                                                        </div>\n" +
                "                                                        <div>\n" +
                "                                                            <input style=\"display: none\" name=\"questiontype\"\n" +
                "                                                                   value=" + question_type + ">\n" +
                "<input style=\"display: none\" name=\"questionnumber\"\n" +
                "                                                                   value= " + question_number + ">\n" +
                "<input style=\'display: none\' name='indicatorID\'\n value=" + indicator_id + ">" +
                "                                                        <textarea class=\"form-control\"\n" +
                "                                                                  onkeyup=\"SwapTxt(event)\"\n" +
                "                                                                  name=\"choicetitle\">" + JSON.parse(q[i]['content'])['title'] + "</textarea>\n" +
                "                                                            <div class=\"row\" style=\"margin-top: 15px\">\n" +
                "                                                                <div class=\"col-md-9\">\n" +
                "                                                        <span><select class=\"form-control-sm\" name=\"class\">\n" +
                "                                                            <option>单选</option>\n" +
                "                                                            <option>多选</option>\n" +
                "                                                        </select>\n" +
                "                                                            </span>\n" +
                "                                                                    <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input\n" +
                "                                                                            name=\"required\"\n" +
                "                                                                            type=\"checkbox\"><span>必答题</span></span>\n" +
                "                                                                    <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input\n" +
                "                                                                            name=\"attachment\"\n" +
                "                                                                            type=\"checkbox\"><span>含附件上传</span></span>\n" +
                "                                                                    <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<select\n" +
                "                                                                            name=\"markmethod\" class=\"form-control-sm\">\n" +
                "                                                            <option>自动打分</option>\n" +
                "                                                            <option>手动打分</option>\n" +
                "                                                        </select></span>\n" +
                "                                                                    <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input\n" +
                "                                                                            name=\"importanswer\"\n" +
                "                                                                            type=\"checkbox\"><span>导入答案</span></span>\n" +
                "                                                                    <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span>满分: </span><input type=\"text\" name=\"points\" size=\"10\"></span>\n" +
                "                                                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n" +
                "                                                                </div>\n" +
                "                                                            </div>\n" +
                "                                                            <div style=\"margin-top: 15px;display: flex;flex-direction: row\">\n" +
                "<div style='float: left;width:50%'>" +
                "                                                                <textarea onkeyup=\"matrix_title_split(event)\"\n" +
                "                                                                          placeholder=\"编辑行\"\n" +
                "                                                                          class=\"form-control\"\n" +
                "                                                                   name=\"row\" style = \"width: 90%; height: 100%\"></textarea>\n" +
                "</div>" +
                "<div style='float: left;width: 50%'>" +
                "                                                                <table class=\"table table-responsive-sm text-left\">\n" +
                "                                                                    <tbody>\n" +
                "                                                                    <tr>\n" +
                "                                                                        <td>选项文字</td>\n" +
                "                                                                        <td>允许填空</td>\n" +
                "                                                                        <td>上移下移</td>\n" +
                "                                                                    </tr>\n" +
                "                                                                    </tbody>\n" +
                "                                                                </table>\n" +
                "                                                                     <div style=\"margin-left: 10px;margin-bottom: 15px\">\n" +
                "                                                                    <a class=\"addchoice\"\n" +
                "                                                                       onclick=\"addcolumn(event)\"><span>添加选项</span></a>\n" +
                "                                                                </div>\n" +
                "</div>" +
                "<div style='clear: both'></div>" +
                "                                                            </div>\n" +
                "<div style='margin-top: 15px'></div>" +
                "                                                            <input type=\"button\"\n" +
                "                                                                   class=\"btn btn-outline-danger btn-lg  btn-round\"\n" +
                "                                                                   value=\"保存\"\n" +
                "                                                                   onclick=\"submit_matrix(event); hide_edit(event)\">\n" +
                "                                                            <input type=\"button\"\n" +
                "                                                                   class=\"btn btn-outline-danger btn-lg  btn-round\"\n" +
                "                                                                   value=\"清空\">\n" +
                "                                                        </div>\n" +
                "                                                    </form>\n" +
                "                                                </div>");
            variableID(10);
            if (required === 'on') {
                $('.div_question').last().find("input[name='required']")[0].checked = true
            } else {
                $('.div_question').last().find("input[name='required']")[0].checked = false
            }
            if (attachment === 'on') {
                $('.div_question').last().find("input[name='attachment']")[0].checked = true
            } else {
                $('.div_question').last().find("input[name='attachment']")[0].checked = false
            }
            if (markmethod === '自动打分') {
                $('.div_question').last().find('select')[0][0].selected = true
            } else {
                $('.div_question').last().find('select')[0][1].selected = true
            }
            if (importanswer === 'on') {
                $('.div_question').last().find("input[name='importanswer']")[0].checked = true
            } else {
                $('.div_question').last().find("input[name='importanswer']")[0].checked = false
            }
            $('.div_question').last().find("input[name='points']").val(marks);
            for (var x = 0; x < JSON.parse(q[i]['content'])['column'].length; x++) {
                $('.div_question').last().find('table').eq(0).children('thead').children().eq(0).append(" <td>" + JSON.parse(q[i]['content'])['column'][x] + "</td>\n")
            }
            for (var y = 0; y < JSON.parse(q[i]['content'])['rows'].length; y++) {
                $('.div_question').last().find('table').eq(0).children('tbody').append("<tr>\n" +
                    "                                                                        <td>" + JSON.parse(q[i]['content'])['rows'][y] + "\n" +
                    "                                                                        </td>\n" +
                    "                                                                    </tr>\n");
                for (var z = 0; z < JSON.parse(q[i]['content'])['column'].length; z++) {
                    $('.div_question').last().find('table').eq(0).children('tbody').children().eq(y).append("<td><a class=\"ft-circle\"</a></td>")
                }
            }
            $('.div_question').last().find("textarea[name='row']").val(JSON.parse(q[i]['content'])['rows']); //换行问题
            for (var a = 0; a < JSON.parse(q[i]['content'])['column'].length; a++) {
                $('.div_question').last().find('table').eq(1).children('tbody').append("                                                                    <tr>\n" +
                    "                                                                        <td>\n" +
                    "                                                                            <input type=\"text\" name=\"choice\"\n" +
                    "                                                                                   onkeyup=\"matrix_text_swap(event)\" value=" + JSON.parse(q[i]['content'])['column'][a] + ">" +
                    "                                                                            <a><i class=\"ft-minus-circle\"\n" +
                    "                                                                                  onclick=\"minuscolumn(event)\"></i></a>\n" +
                    "                                                                        </td>\n" +
                    "                                                                        <td>\n" +
                    "                                                                            <input name=\"allowblank\" type=\"checkbox\">\n" +
                    "                                                                        </td>\n" +
                    "                                                                        <td>\n" +
                    "                                                                            <a onclick=\"moveup(event)\"><i\n" +
                    "                                                                                    class=\"ft-arrow-up\"></i></a>\n" +
                    "                                                                            <a onclick=\"movedown(event)\"><i\n" +
                    "                                                                                    class=\"ft-arrow-down\"></i></a>\n" +
                    "                                                                        </td>\n" +
                    "                                                                    </tr>\n")
            }
        }else if (q[i]['question_type'] === '表格题') {
            var len = $(".div_question").length + 1;
            $('#question_list').append("                                                <div class=\"div_question\" id = " + len + ">\n" +
                "                                                     <form method=\"post\" class=\"form-horizontal\">\n" +
                "                                                   <div onclick=\"toggle_edit(event)\" class='toggle'>\n" +
                "                                                        <div>\n" +
                "                                                            <h5 style=\"display: inline\">" + len + '.' + ' ' + "</h5>\n" +
                "                                                            <h5 style=\"display: inline\">" + JSON.parse(q[i]['content'])['title'] + "  </h5>\n" +
                "                                                            <button class=\"btn mr-1 btn-secondary\" onclick='delquestion(event)'>del</button>\n" +
                "                                                        </div>\n" +
                "                                                         <div>\n" +
                "                                                            <table class=\"table table-responsive-sm text-left\" style=\"table-layout: fixed;\">\n" +
                "                                                                <thead>\n" +
                "                                                                <tr>\n" +
                "                                                                    <td></td>\n" +
                "                                                                </tr>\n" +
                "                                                                </thead>\n" +
                "                                                                <tbody>\n" +
                "                                                                </tbody>\n" +
                "                                                            </table></div></div>\n" +
                "\n" +
                "                                                        <div>\n" +
                "                                                            <input style=\"display: none\" name=\"questiontype\"\n" +
                "                                                                   value=" + question_type + ">\n" +
                "<input style=\"display: none\" name=\"questionnumber\"\n" +
                "                                                                   value= " + question_number + ">\n" +
                "<input style=\'display: none\' name='indicatorID\'\n value=" + indicator_id + ">" +
                "                                                        <textarea class=\"form-control\"\n" +
                "                                                                  onkeyup=\"SwapTxt(event)\" name=\"choicetitle\">" + JSON.parse(q[i]['content'])['title'] + "</textarea>\n" +
                "                                                        <div class=\"row\" style=\"margin-top: 15px\">\n" +
                "                                                            <div class=\"col-md-9\">\n" +
                "                                                                <span><input\n" +
                "                                                                        name=\"required\"\n" +
                "                                                                        type=\"checkbox\"><span>必答题</span></span>\n" +
                "                                                                <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input\n" +
                "                                                                        name=\"attachment\"\n" +
                "                                                                        type=\"checkbox\"><span>含附件上传</span></span>\n" +
                "                                                                <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<select\n" +
                "                                                                        name=\"markmethod\" class=\"form-control-sm\">\n" +
                "                                                            <option>自动打分</option>\n" +
                "                                                            <option>手动打分</option>\n" +
                "                                                        </select></span>\n" +
                "                                                                <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input\n" +
                "                                                                        name=\"importanswer\"\n" +
                "                                                                        type=\"checkbox\"><span>导入答案</span></span>\n" +
                "                                                                <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span>满分: </span><input type=\"text\" name=\"points\" size=\"10\"></span>\n" +
                "                                                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n" +
                "                                                            </div>\n" +
                "                                                        </div>\n" +
                "                                                        <div style=\"margin-top: 15px;display: flex;flex-direction: row\">\n" +
                "                                                            <div style=\"float: left;width: 50%\">\n" +
                "                                                      <textarea onkeyup=\"table_title_split(event)\"\n" +
                "                                                              style=\" width: 90%;height:100% \" rows='10' name=\"row\"></textarea>\n" +
                "                                                            </div>\n" +
                "                                                            <div style=\"float: left;width: 50%\">\n" +
                "                                                            <textarea onkeyup=\"table_choice_split(event)\"\n" +
                "                                                                    style=\" width: 90%;height:100% \" rows='10' name=\"column\"></textarea></div>\n" +
                "                                                        </div>\n" +
                "                                                         <div style='clear: both'></div>\n" +
                "                                                         <div style='margin-top: 15px'></div>\n" +
                "                                                        <input type=\"button\"\n" +
                "                                                               class=\"btn btn-outline-danger btn-lg  btn-round\"\n" +
                "                                                               value=\"保存\" onclick=\"submit_form(event); hide_edit(event)\">\n" +
                "                                                        <input type=\"button\"\n" +
                "                                                               class=\"btn btn-outline-danger btn-lg  btn-round\"\n" +
                "                                                               value=\"清空\">\n" +
                "\n" +
                "                                                </div>\n" +
                "                                            </form>\n" +
                "                                            </div>");
            variableID(10);
            if (required === 'on') {
                $('.div_question').last().find("input[name='required']")[0].checked = true
            } else {
                $('.div_question').last().find("input[name='required']")[0].checked = false
            }
            if (attachment === 'on') {
                $('.div_question').last().find("input[name='attachment']")[0].checked = true
            } else {
                $('.div_question').last().find("input[name='attachment']")[0].checked = false
            }
            if (markmethod === '自动打分') {
                $('.div_question').last().find('select')[0][0].selected = true
            } else {
                $('.div_question').last().find('select')[0][1].selected = true
            }
            if (importanswer === 'on') {
                $('.div_question').last().find("input[name='importanswer']")[0].checked = true
            } else {
                $('.div_question').last().find("input[name='importanswer']")[0].checked = false
            }
            $('.div_question').last().find("input[name='points']").val(marks);

            for (var x = 0; x < JSON.parse(q[i]['content'])['column'].length; x++) {
                $('.div_question').last().find('table').eq(0).children('thead').children().eq(0).append(" <td>" + JSON.parse(q[i]['content'])['column'][x] + "</td>\n")
            }
            for (var y = 0; y < JSON.parse(q[i]['content'])['rows'].length; y++) {
                $('.div_question').last().find('table').eq(0).children('tbody').append("                                                                <tr>\n" +
                    "                                                                    <td>" + JSON.parse(q[i]['content'])['rows'][y] +
                    "                                                                    </td> " +
                    "                                                                </tr>\n"
                );
                for (var z = 0; z < JSON.parse(q[i]['content'])['column'].length; z++) {
                    $('.div_question').last().find('table').eq(0).children('tbody').children().eq(y).append("<td><textarea disabled style='width: 100%'></textarea></td>\n")
                }
            }
            $('.div_question').last().find("textarea[name='row']").val(JSON.parse(q[i]['content'])['rows']); //换行问题
            $('.div_question').last().find("textarea[name='column']").val(JSON.parse(q[i]['content'])['column']);
        } else if (q[i]['question_type'] === '附件题'){

        }
    }
    for (i = 0; i < $('.toggle').length; i++) {
            $('.toggle').eq(i).next().toggle();
    }
</script>
<script>
</script>
</body>
</html>